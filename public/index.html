<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <!-- <link rel="stylesheet" href="./style.css"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>

  <div class="container">
    <h1>Payment Form</h1>
    <form id="userdataForm">
      <label for="goodsNm">Goods Name:</label>
      <input type="text" id="goodsNm" name="goodsNm" value="IPhone 11 Plus"><br><br>

      <label for="amount">Amount:</label>
      <input type="text" id="amount" name="amount" value="2000"><br><br>

      <label for="userFee">User Fee:</label>
      <input type="text" id="userFee" name="userFee" value="0"><br><br>

      <label for="payType">Payment Type:</label>
      <select id="payType" name="payType">
        <option value="NO">Tất cả</option>
        <option value="IC">Thẻ tín dụng (Visa/master/JCB…)</option>
        <option value="DC">Thẻ ATM nội địa</option>
        <option value="EW">Ví điện tử (Zalopay, Momo, Moca. ShoopePay,
          Viettelpay)</option>
        <option value="QR">Thanh toán qua VNPAYQR</option>
      </select><br><br>

      <label for="bankCode">Bank Code:</label>
      <input type="text" id="bankCode" name="bankCode" placeholder="MOMO/ZALO/MOCA/SHPP/VTTP" value=""><br><br>

      <label for="windowColor">Window Color:</label>
      <input type="color" id="windowColor" name="windowColor" value="#0061E3"><br><br>

      <label for="payOption">Pay Option:</label>
      <select id="payOption" name="payOption">
        <option value="PAY_CREATE_TOKEN">PAY_CREATE_TOKEN</option>
        <option value="">NO_SAVE</option>
      </select><br><br>

      <label for="merId">Merchant ID:</label>
      <input type="text" id="merId" name="merId" value="MGPDEMO001"><br><br>

      <label for="tokenId">Token ID:</label>
      <input type="text" id="tokenId" name="tokenId" value=""><br><br>

    </form>
    <form id="megapayForm" name="megapayForm" method="POST">
      <input type="hidden" name="invoiceNo" value="ORDER_20231024131756_2985" />
      <input type="hidden" name="amount" value="3000000" />
      <input type="hidden" name="currency" value="VND" />
      <input type="hidden" name="goodsNm" value="IPhone 11 Plus" />
      <input type="hidden" name="fee" value="" />

      <!-- customer info -->
      <input type="hidden" name="buyerFirstNm" value="Manh" />
      <input type="hidden" name="buyerLastNm" value="Tran" />
      <input type="hidden" name="buyerPhone" value="0989713856" />
      <input type="hidden" name="buyerEmail" value="keubme@gmail.com" />
      <input type="hidden" name="buyerAddr" value="QYBPWKHCNW" />
      <input type="hidden" name="buyerCity" value="hanoi" />
      <input type="hidden" name="buyerState" value="hanoi" />
      <input type="hidden" name="buyerPostCd" value="12950" />
      <input type="hidden" name="buyerCountry" value="" />
      <input type="hidden" name="receiverLastNm" value="" />
      <input type="hidden" name="receiverFirstNm" value="Ha" />
      <input type="hidden" name="receiverPhone" value="" />
      <input type="hidden" name="receiverState" value="" />
      <input type="hidden" name="receiverPostCd" value="12950" />
      <input type="hidden" name="receiverCountry" value="" />
      <!-- ----------------------------- Main Value ---------------------------- -->
      <!-- Call Back URL -->
      <input type="hidden" name="callBackUrl" value="https://vnpt-epay-demo.onrender.com/callback/transactionHandle" />
      <!-- Notify URL -->
      <input type="hidden" name="notiUrl" value="https://vnpt-epay-demo.onrender.com/transactionHandle" />
      <!-- Merchant ID -->
      <input type="hidden" name="merId" value="MGPDEMO001" />
      <!-- Encode Key -->
      <input type="hidden" name="reqDomain" value="http://localhost:5500" />
      <input type="hidden" name="userId" value="0" />
      <input type="hidden" name="userLanguage" value="VN" />
      <input type="hidden" name="merchantToken"
        value="b5545f1f6bd872a91df5d30c12596741f2428ecc454829ef868c937cb9433fd2" />
      <input type="hidden" name="payToken" value="" />
      <input type="hidden" name="timeStamp" value="20231024131756" />
      <input type="hidden" name="merTrxId" value="DEMO_20231024131756_4271" />
      <input type="hidden" name="windowType" value="1" />
      <input type="hidden" name="windowColor" value="#0061E3" />
      <input type="hidden" name="userFee" value="" />
      <input type="hidden" name="vaCondition" value="03" />
      <input type="hidden" name="payType" value="NO" />
      <input type="hidden" name="payOption" value="" />
      <input type="hidden" name="vaStartDt" value="20231024131752" />
      <input type="hidden" name="vaEndDt" value="20240424235959" />
      <input type="hidden" name="bankCode" value="" />
      <input type="hidden" name="description" value="GKLIBVWLWG" />
      <input type="hidden" name="ipinfo" value="ip=183.80.29.6
&amp;loc=VN
" />
      <button type="button" class="btn btn-primary" name="btnSubmit " value="btnSubmit" id="submitBtn">
        Submit</button>
    </form>
  </div>


  <script src="https://code.jquery.com/jquery-2.2.4.js"></script>
  <script src="./js/generateTransaction.js"></script>
  <script src="./js/paymentClient.js"></script>
  <script>
    document.getElementById('submitBtn').onclick = async (e) => {
      e.preventDefault();
      let form = document.getElementById('megapayForm');
      // let jsonForm = formToJson(form)
      // console.log(jsonForm);
      await createTransaction();
      openPayment(1, 'https://pg.megapay.vn',);
    }
  </script>
</body>

</html>